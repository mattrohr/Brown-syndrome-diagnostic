<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="chrome=1">
	<title>Brown syndrome diagnostic</title>
	<script src="face-api.min.js"></script>
	<script src="locate-face.js"></script>
	<script src="create-canvas.js"></script>
	<script src="locate-pupils.js"></script>
	<script src="diagnose.js"></script>
	<!--<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">-->
</head>
<style>
	body {
		/* dark background to remove glasses glare */
		background-color: rgb(31, 33, 35);
		color: white;
	}

	canvas {
		position: absolute;
		left: 0px;
</style>
<script>
</script>

<body>
	<h3>Brown syndrome diagnostic</h3>
	<p>For Investigational Use Only. The performance characteristics of this product have not been established.</p>
	<hr>

	<p>Allow camera access, wait for gray landmarks to populate (~6 seconds), stare directly at your webcam, fix your head, <input type="button" value="click to begin pupil tracking" onclick="button_callback()">, and move your eyes around.</p>
	<p>Works best without glasses and with desktop Chrome. Images are not saved and not sent to a server.</p>
	<p>Pupil location is compared to facial landmarks to determine unilateral deviation. If your head moves too much, you'll be asked to restart the diagnostic (by refreshing the page).</p>
	<section>
		<p> <a href="https://github.com/mattrohr/Browns-syndrome-diagnostic">This project is open source</a>. Based on <a href="https://github.com/tensorflow/tfjs">Tensorflow.js</a>, <a href="https://github.com/justadudewhohacks/face-api.js">face-api.js by Vincent Mühler</a>, <a href="https://github.com/davisking/dlib-models">dlib-models by Davis King<a>, <a href="https://github.com/nenadmarkus/picojs">picojs by Nenad Markuš</a>, and <a href="https://github.com/cbrandolino/camvas">camvas by Claudio Brandolino</a>.</p>
	</section>
	<hr>
	<div>
		<p>head movement [pixels] (from origin): <label id="currentHeadDeviation"></label> ± 2</p>
		<p><b>max head movement [pixels]: <label id="maxHeadDeviation"></label> ± 3 (If over 6, too much head movement detected. Please refresh page to restart diagnostic)</b></p>
		
		<p>pupil separation [pixels]: <label id="pupilDifference"></label> ± 3</p>
		<p><b>max pupil deviation [pixels]: <label id="roundedPupilSeparation"></label> ± 3 (If over 3, abnormal unilateral deviation detected)</b></p>

	</div>

	<video id="video" width="640" height="480" muted playsinline autoplay></video>
	<script src="locate-landmarks.js"></script>

	<canvas width=640 height=480></canvas>

	</div>
</body>

</html>